<!DOCTYPE html>
<html lang="en">
<head>
	<title>ecsy-three webvr - panorama</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<link type="text/css" rel="stylesheet" href="main.css">
</head>
<body>
	<script type="module">
		import {
			ThreeWorld,
			initialize,
			StereoPhotoSphere,
			StereoPhotoSphereSystem,
			WebGLRenderer
		} from '../build/ecsy-three.module-unpkg.js';

		import { VRButton } from 'https://unpkg.com/three@0.116.1/examples/jsm/webxr/VRButton.js';

		const world = new ThreeWorld();

		let data = initialize(world);

		let { scene, camera, renderer } = data.entities;

		const threeRenderer = renderer.getComponent(WebGLRenderer).renderer;

		threeRenderer.xr.enabled = true;
		threeRenderer.xr.setReferenceSpaceType('local');

		camera.layers.enable(1);

		document.body.appendChild(VRButton.createButton(threeRenderer));

		world
			.registerComponent(StereoPhotoSphere)
			.registerSystem(StereoPhotoSphereSystem);

		scene.addComponent(StereoPhotoSphere, {
			src: "textures/cube/sun_temple_stripe_stereo.jpg"
		});

		world.execute();
	</script>
</body>
</html>
